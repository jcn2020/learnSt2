---
version: 1.0
description: install package 

input: 
  - git_packs

vars:
  - status: 'nil'
  - pack_ref_name: 
      - "g_test"
  - msg: "Hello Test"

output: 
  - mySource: <% ctx().git_packs %>
  - myStatus: <% ctx().status %>

tasks:
  # task to check if installed? 
  uninstall_pack:
    action: packs.uninstall
    input: 
      packs: <% ctx().pack_ref_name %>
    next: 
      - when: <% succeeded() %>
    #    publish:
    #      - status: "[status] pass uninstall_pack"
        do:
          - install_pack

  install_pack:
    action: packs.install
    input:  
      packs: <% ctx().git_packs %>
    next:
      - when: <% succeeded() %> 
        publish:
          - status: "[status] pass install_pack"
        do: 
          - run_action
